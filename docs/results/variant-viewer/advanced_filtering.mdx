---
sidebar_position: 4
sidebar_label: Advanced filtering
---

# Advanced filtering of variants

Click on the "**Advanced Filtering**" button at the top of the table:

<p align="center">
<img src={require('/img/vv/advanced_filteing_btn.png').default} width="1200"/>
</p>

You will see the query wizard:

<p align="center">
<img src={require('/img/vv/query_wizard.png').default} width="700"/>
</p>

:::info
If you are on the page of [Variant Viewer with somatic mutations](/results/variant-viewer/variant-viewer),
the somatic mutation filter ("Origin in Somatic") will be selected by default:
<p align="center">
<img src={require('/img/vv/somatic_origin.png').default} width="550"/>
</p>
:::

### Adding a condition

To add a new condition, click on the highlighted window:

<p align="center">
<img src={require('/img/vv/add_new_condition.png').default} width="600"/>
</p>

You will see a list of annotation columns by which you can filter variants:

<p align="center">
<img src={require('/img/vv/fields.png').default} height="250"/>
</p>

Select one column. For example, let's select the "Gene" column. Next, click on the middle window:

<p align="center">
<img src={require('/img/vv/operator_window.png').default} width="500"/>
</p>

and select an operator:

<p align="center">
<img src={require('/img/vv/operators.png').default} height="250"/>
</p>

Then click on the last window:

<p align="center">
<img src={require('/img/vv/option_window.png').default} width="500"/>
</p>

and select the value of the filtering column, which the variants you are looking for should correspond to
(in the given example, the names of the genes in which the variants are located):

<p align="center">
<img src={require('/img/vv/options_gene.png').default} height="250"/>
</p>

In this case, you can select several values at once by sequentially clicking on the line of each.
Then the selected values will be highlighted with check marks:

<p align="center">
<img src={require('/img/vv/selected_options.png').default} width="200"/>
</p>

If you want to ***add one more condition*** to the query,
click anywhere on the query wizard page (outside edit value container) and add a new condition as described [here](/results/variant-viewer/advanced_filtering#добавление-следующего-условия).

Filtering columns differ in their use.
So, in addition to the example of multi-selection of options described above, in cases with ***columns with a numerical value***,
you need to type a specific number in the highlighted field (for example, type the start position of the variant in the Start column field):

<p align="center">
<img src={require('/img/vv/numerical_value_input.png').default} width="500"/>
</p>

In addition, only one value can be selected for ***HPO Phenotype*** and ***Gene panel*** columns:

<p align="center">
<img src={require('/img/vv/hpo_options.png').default} width="550"/>
</p>

### Editing a condition

You can change the ***operator*** and/or ***value*** in an already created condition.
To do this, you need to click on the corresponding field:

<p align="center">
<img src={require('/img/vv/edit_condition.png').default} width="220"/>
</p>

and choose another option:

<p align="center">
<img src={require('/img/vv/change_operator.png').default} width="450"/>
</p>

### Turning off a condition

Turning off a condition is useful if you don’t want to lose the added condition, but at the moment you don’t need filtering by it.

import DeleteOrTurnOff from '/docs/imported_components/_turn_off_or_delete_cond.mdx';

<DeleteOrTurnOff action="turn off" button="off" />

<p align="center">
<img src={require('/img/vv/turn_off_condition.png').default} width="700"/>
</p>

### Removing a condition

<DeleteOrTurnOff action="remove" button="cross" />

<p align="center">
<img src={require('/img/vv/delete_condition.png').default} width="700"/>
</p>

:::tip
A condition that has not yet been filled in can also be removed:

<p align="center">
<img src={require('/img/vv/delete_new_condition.png').default} width="600"/>
</p>
:::

### Adding the following condition

1. If the variants you are looking for must match ***both conditions at once*** (an already created one and a new one), then click on "**AND**":

<p align="center">
<img src={require('/img/vv/and_cond.png').default} width="550"/>
</p>

import NewCond from '/docs/imported_components/_add_new_cond.mdx';

<NewCond />

<p align="center">
<img src={require('/img/vv/and_cond_field.png').default} width="550"/>
</p>

2. If the variants you are looking for must match ***at least one of the conditions*** (an already created one or a new one),
then hover the cursor over the already created condition and click on "**OR**":

<p align="center">
<img src={require('/img/vv/or_cond.png').default} width="550"/>
</p>

<NewCond />

<p align="center">
<img src={require('/img/vv/or_cond_field.png').default} width="550"/>
</p>

### Applying a query

After you have added all the conditions for the sought variants, click on "**Apply**".
The query wizard will be closed and the query will be applied to the variants.

You can see which query has been applied at the top of the table.
In the given example, 1 variant was found for the filter “Origin Somatic":

<p align="center">
<img src={require('/img/vv/filtered_var.png').default} width="1100"/>
</p>

You can ***turn off*** the condition by clicking on the off button:

<p align="center">
<img src={require('/img/vv/turn_off_cond_on_vv.png').default} width="230"/>
</p>

or ***remove*** the condition by clicking on the cross:

<p align="center">
<img src={require('/img/vv/delete_cond_on_vv.png').default} width="250"/>
</p>

To ***remove all conditions*** from the query, click on the "Clear all filters" button:

<p align="center">
<img src={require('/img/vv/clear_all_filters.png').default} width="250"/>
</p>

To ***change or save your query*** or ***create a new one***, click on "**Advanced Filtering**".
To return to the ***main page*** of Variant Viewer, click on "**Basic Filtering**".

### Saving a query

If you want to reuse the created query in the future, save it. To do this, click on “**Save to Library**”:

<p align="center">
<img src={require('/img/vv/save_to_library.png').default} width="700"/>
</p>

Enter the query name:

<p align="center">
<img src={require('/img/vv/query_name.png').default} width="500"/>
</p>

and click on "**Save**".

The query will appear in the **Saved queries** list. To apply a saved query, find it in the list and click on its line:

<p align="center">
<img src={require('/img/vv/select_saved_query.png').default} width="200"/>
</p>

and click on "**Apply**".

In addition, the saved query will appear in [the Basic Filtering mode](/results/variant-viewer/basic_filtering).

If you want to ***delete*** a saved query, click on its line and then on the trash button:

<p align="center">
<img src={require('/img/vv/delete_saved_query.png').default} width="200"/>
</p>
